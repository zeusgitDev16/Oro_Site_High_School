| schemaname | tablename                 | policyname                                       | roles           | cmd    | permissive | qual                                                                                                                                                                                                                                                                                                                                                                                                             | with_check                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------- | ------------------------- | ------------------------------------------------ | --------------- | ------ | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | assignments               | assignments_delete_admin                         | {authenticated} | DELETE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | assignments               | assignments_insert_admin                         | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | assignments               | assignments_select_all                           | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | assignments               | assignments_update_admin                         | {authenticated} | UPDATE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_active_quarters | classroom_active_quarters_teacher_manage         | {authenticated} | ALL    | PERMISSIVE | ((EXISTS ( SELECT 1
   FROM classrooms c
  WHERE (((c.id)::text = classroom_active_quarters.classroom_id) AND ((c.teacher_id)::text = (auth.uid())::text)))) OR (EXISTS ( SELECT 1
   FROM classroom_teachers ct
  WHERE (((ct.classroom_id)::text = classroom_active_quarters.classroom_id) AND ((ct.teacher_id)::text = (auth.uid())::text)))) OR COALESCE(( SELECT is_admin(auth.uid()) AS is_admin), false)) | ((EXISTS ( SELECT 1
   FROM classrooms c
  WHERE (((c.id)::text = classroom_active_quarters.classroom_id) AND ((c.teacher_id)::text = (auth.uid())::text)))) OR (EXISTS ( SELECT 1
   FROM classroom_teachers ct
  WHERE (((ct.classroom_id)::text = classroom_active_quarters.classroom_id) AND ((ct.teacher_id)::text = (auth.uid())::text)))) OR COALESCE(( SELECT is_admin(auth.uid()) AS is_admin), false)) |
| public     | classroom_active_quarters | classroom_active_quarters_view                   | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_courses         | classroom_courses_delete_memberships             | {public}        | DELETE | PERMISSIVE | (EXISTS ( SELECT 1
   FROM classrooms c
  WHERE ((c.id = classroom_courses.classroom_id) AND ((c.teacher_id = auth.uid()) OR (EXISTS ( SELECT 1
           FROM classroom_teachers ct
          WHERE ((ct.classroom_id = ct.classroom_id) AND (ct.teacher_id = auth.uid()))))))))                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_courses         | classroom_courses_insert_memberships             | {public}        | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | (EXISTS ( SELECT 1
   FROM classrooms c
  WHERE ((c.id = classroom_courses.classroom_id) AND ((c.teacher_id = auth.uid()) OR (EXISTS ( SELECT 1
           FROM classroom_teachers ct
          WHERE ((ct.classroom_id = ct.classroom_id) AND (ct.teacher_id = auth.uid()))))))))                                                                                                                               |
| public     | classroom_courses         | classroom_courses_select_memberships             | {public}        | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM classrooms c
  WHERE ((c.id = classroom_courses.classroom_id) AND ((c.teacher_id = auth.uid()) OR (EXISTS ( SELECT 1
           FROM classroom_teachers ct
          WHERE ((ct.classroom_id = ct.classroom_id) AND (ct.teacher_id = auth.uid()))))))))                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_students        | Teachers can remove students from own classrooms | {authenticated} | DELETE | PERMISSIVE | is_classroom_manager(classroom_id, auth.uid())                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_students        | Teachers can add students to own classrooms      | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_classroom_manager(classroom_id, auth.uid())                                                                                                                                                                                                                                                                                                                                                                   |
| public     | classroom_students        | Teachers can view enrollments                    | {authenticated} | SELECT | PERMISSIVE | (is_classroom_manager(classroom_id, auth.uid()) OR (EXISTS ( SELECT 1
   FROM profiles p
  WHERE ((p.id = auth.uid()) AND (p.role = 'teacher'::text)))))                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classroom_teachers        | ct_insert_self_join_any                          | {public}        | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | (teacher_id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | classrooms                | teachers_delete_own_classrooms                   | {authenticated} | DELETE | PERMISSIVE | (auth.uid() = teacher_id)                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | Teachers can create classrooms                   | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | (auth.uid() = teacher_id)                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | classrooms                | teachers_create_classrooms                       | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | ((auth.uid() = teacher_id) AND (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'teacher'::text)))))                                                                                                                                                                                                                                                                 |
| public     | classrooms                | admins_view_all_classrooms                       | {authenticated} | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'admin'::text))))                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | co_teachers_view_joined_classrooms               | {authenticated} | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM classroom_teachers ct
  WHERE ((ct.classroom_id = classrooms.id) AND (ct.teacher_id = auth.uid()))))                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | students_search_by_access_code                   | {authenticated} | SELECT | PERMISSIVE | ((is_active = true) AND (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'student'::text)))))                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | students_view_enrolled_classrooms                | {authenticated} | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM classroom_students cs
  WHERE ((cs.classroom_id = classrooms.id) AND (cs.student_id = auth.uid()))))                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | teachers_search_by_access_code                   | {public}        | SELECT | PERMISSIVE | ((is_active = true) AND (EXISTS ( SELECT 1
   FROM teachers t
  WHERE ((t.id = auth.uid()) AND (t.is_active = true)))))                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | teachers_view_own_classrooms                     | {authenticated} | SELECT | PERMISSIVE | (auth.uid() = teacher_id)                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | classrooms                | co_teachers_update_joined_classrooms             | {authenticated} | UPDATE | PERMISSIVE | (EXISTS ( SELECT 1
   FROM classroom_teachers ct
  WHERE ((ct.classroom_id = classrooms.id) AND (ct.teacher_id = auth.uid()))))                                                                                                                                                                                                                                                                                  | (EXISTS ( SELECT 1
   FROM classroom_teachers ct
  WHERE ((ct.classroom_id = classrooms.id) AND (ct.teacher_id = auth.uid()))))                                                                                                                                                                                                                                                                                  |
| public     | classrooms                | teachers_update_own_classrooms                   | {authenticated} | UPDATE | PERMISSIVE | (auth.uid() = teacher_id)                                                                                                                                                                                                                                                                                                                                                                                        | (auth.uid() = teacher_id)                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | course_active_quarters    | course_active_quarters_teacher_manage            | {authenticated} | ALL    | PERMISSIVE | (EXISTS ( SELECT 1
   FROM courses c
  WHERE ((c.id = course_active_quarters.course_id) AND (c.teacher_id = auth.uid()))))                                                                                                                                                                                                                                                                                       | (EXISTS ( SELECT 1
   FROM courses c
  WHERE ((c.id = course_active_quarters.course_id) AND (c.teacher_id = auth.uid()))))                                                                                                                                                                                                                                                                                       |
| public     | course_active_quarters    | course_active_quarters_students_view             | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | course_assignments        | assignments_admin_full_access                    | {authenticated} | ALL    | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | course_assignments        | course_assignments_select_course_teachers        | {public}        | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM course_teachers ct
  WHERE ((ct.course_id = course_assignments.course_id) AND (ct.teacher_id = (auth.uid())::text))))                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | course_modules            | modules_admin_full_access                        | {authenticated} | ALL    | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | course_modules            | course_modules_select_course_teachers            | {public}        | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM course_teachers ct
  WHERE ((ct.course_id = course_modules.course_id) AND (ct.teacher_id = (auth.uid())::text))))                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | course_teachers           | course_teachers_delete_authenticated             | {authenticated} | DELETE | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | course_teachers           | course_teachers_insert_authenticated             | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | true                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | course_teachers           | course_teachers_select_all                       | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | courses                   | courses_admin_full_access                        | {authenticated} | ALL    | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | courses                   | courses_delete_admin                             | {authenticated} | DELETE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | courses                   | courses_insert_admin                             | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | courses                   | courses_select_all                               | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | courses                   | courses_select_course_teachers                   | {public}        | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM course_teachers ct
  WHERE ((ct.course_id = courses.id) AND (ct.teacher_id = (auth.uid())::text))))                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | courses                   | courses_update_teacher_or_admin                  | {authenticated} | UPDATE | PERMISSIVE | ((teacher_id = auth.uid()) OR is_admin())                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | grades                    | grades_insert_admin                              | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | grades                    | grades_select_own_or_admin                       | {authenticated} | SELECT | PERMISSIVE | ((EXISTS ( SELECT 1
   FROM submissions s
  WHERE ((s.id = grades.submission_id) AND (s.student_id = auth.uid())))) OR is_admin())                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | grades                    | grades_update_admin                              | {authenticated} | UPDATE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | parent_students           | parent_students_delete_admin                     | {authenticated} | DELETE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | parent_students           | parent_students_insert_admin                     | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | parent_students           | parent_students_select_own_or_admin              | {authenticated} | SELECT | PERMISSIVE | ((parent_id = auth.uid()) OR (student_id = auth.uid()) OR is_admin())                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | parent_students           | parent_students_update_admin                     | {authenticated} | UPDATE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | students                  | students_delete_admin                            | {authenticated} | DELETE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | students                  | students_insert_admin                            | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | students                  | students_select_all_for_teachers                 | {authenticated} | SELECT | PERMISSIVE | (EXISTS ( SELECT 1
   FROM (profiles p
     JOIN roles r ON ((r.id = p.role_id)))
  WHERE ((p.id = auth.uid()) AND (r.name = ANY (ARRAY['teacher'::text, 'grade_level_coordinator'::text, 'coordinator'::text, 'hybrid'::text])))))                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | students                  | students_select_own_or_admin                     | {authenticated} | SELECT | PERMISSIVE | ((auth.uid() = id) OR is_admin())                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | students                  | students_update_admin                            | {authenticated} | UPDATE | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | submissions               | submissions_insert_own                           | {authenticated} | INSERT | PERMISSIVE | null                                                                                                                                                                                                                                                                                                                                                                                                             | (student_id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | submissions               | submissions_select_own_or_admin                  | {authenticated} | SELECT | PERMISSIVE | ((student_id = auth.uid()) OR is_admin())                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | submissions               | submissions_update_own                           | {authenticated} | UPDATE | PERMISSIVE | (student_id = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | teachers                  | teachers_admin_full_access                       | {authenticated} | ALL    | PERMISSIVE | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | teachers                  | teachers_read_all_authenticated                  | {authenticated} | SELECT | PERMISSIVE | true                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                                             |